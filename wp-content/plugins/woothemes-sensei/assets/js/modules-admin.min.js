function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}jQuery(document).ready(function(e){jQuery("#module-order-course").select2({width:"resolve"}),jQuery("select#lesson-module-options").select2({width:"resolve"}),jQuery(".sortable-module-list").sortable(),jQuery(".sortable-tab-list").disableSelection(),jQuery(".sortable-module-list").bind("sortstop",function(e,t){var r="";jQuery(this).find(".module").each(function(e,t){if(e>0&&(r+=","),r+=jQuery(this).find("span").attr("rel"),jQuery(this).removeClass("alternate"),jQuery(this).removeClass("first"),jQuery(this).removeClass("last"),0==e)jQuery(this).addClass("first alternate");else{var a=e%2;0==a&&jQuery(this).addClass("alternate")}}),jQuery('input[name="module-order"]').attr("value",r)}),jQuery("input.ajax_chosen_select_courses").select2({minimumInputLength:2,placeholder:modulesAdmin.selectplaceholder,width:"300px",multiple:!0,ajax:{url:ajaxurl,dataType:"json",cache:!0,id:function(e){return bond._id},data:function(e,t){return{term:e,page:t||1,action:"sensei_json_search_courses",security:modulesAdmin.search_courses_nonce,"default":""}},results:function(e,t){var r=[];return jQuery.each(e,function(e,t){jQuery.isEmptyObject(t)||(validcourse={id:e,details:t},r.push(validcourse))}),{results:r}}},initSelection:function(e,t){var r=e.data("defaults");e.val(""),r.length>0&&t(r)},formatResult:function(e){return e.details},formatSelection:function(e){return e.details}}),jQuery("#sensei-module-add-toggle").on("click",function(e){var t="wp-hidden-child",r=jQuery(this).parent().next("p#sensei-module-add"),a=r.children("#newmodule");return r.hasClass(t)?(r.removeClass(t),a.val(""),void a.focus()):void r.addClass(t)}),jQuery("#sensei-module-add-submit").on("click",function(e){var t=getParameterByName("post"),r=jQuery(this).parent().children("#newmodule"),a=jQuery(this).parent().children("#add_module_nonce"),s=jQuery("#module_course_mb #taxonomy-module #module-all ul#modulechecklist"),l=r.val(),u=a.val();if(_.isEmpty(l)||_.isEmpty(u))return void r.focus();var n={newTerm:l,security:u,action:"sensei_add_new_module_term",course_id:t};jQuery.post(ajaxurl,n,function(e){if(e.success){var t=e.data.termId,a=e.data.termName;if(!(parseInt(t)>0)||_.isEmpty(a))return void r.focus();var l='<li id="module-'+t+'">';return l+='<label class="selectit">',l+='<input value="'+t+'" type="checkbox" checked="checked" name="tax_input[module][]" id="in-module-'+t+'">',l+=a,l+="</label></li>",s.prepend(l),r.val(""),void r.focus()}if("undefined"!=typeof e.data.errors&&"undefined"!=typeof e.data.errors.term_exists){var t=e.data.term.id,u=s.find("#module-"+t+" input");u.prop("checked","checked"),u.focus(),r.val("")}else console.log(e)})})});